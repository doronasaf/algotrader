'use strict';

const axios = require('axios');
const Alpaca = require('@alpacahq/alpaca-trade-api');
const yahooFinance = require('yahoo-finance2').default;

// Alpaca API Initialization
const alpaca = new Alpaca({
    keyId: process.env.APCA_API_KEY_ID || 'PKITLHSUK46B79WU9XOR',
    secretKey: process.env.APCA_API_SECRET_KEY || 'xrt3kfDjxOCt8CoyAJIXmVLuxdLWh8qwEkGRKMw1',
    paper: process.env.APCA_PAPER_API || true // Set to false for live trading
});

// Configure Daily Budget
const DAILY_BUDGET = parseFloat(process.env.DAILY_BUDGET) || 10000; // Default to $10000
let dailySpent = 0; // Tracks the total amount spent

// Function to fetch pre-market data
async function getPreMarketData(ticker) {
    try {
        const response = await axios.get(`https://query1.finance.yahoo.com/v8/finance/chart/${ticker}?interval=1m&range=1d`);
        const data = response.data.chart.result[0];
        const preMarketData = data.indicators.quote[0];
        const timestamps = data.timestamp;

        // data looks like that:
        const exampleData = {
            "meta": {
                "currency": "USD",
                "symbol": "SYM",
                "exchangeName": "NGM",
                "fullExchangeName": "NasdaqGM",
                "instrumentType": "EQUITY",
                "firstTradeDate": 1615300200,
                "regularMarketTime": 1732736975,
                "hasPrePostMarketData": true,
                "gmtoffset": -18000,
                "timezone": "EST",
                "exchangeTimezoneName": "America/New_York",
                "regularMarketPrice": 23.475,
                "fiftyTwoWeekHigh": 58.58,
                "fiftyTwoWeekLow": 17.11,
                "regularMarketDayHigh": 25.472,
                "regularMarketDayLow": 21.78,
                "regularMarketVolume": 18236847,
                "longName": "Symbotic Inc.",
                "shortName": "Symbotic Inc.",
                "chartPreviousClose": 37.41,
                "previousClose": 37.41,
                "scale": 3,
                "priceHint": 2,
                "currentTradingPeriod": {
                    "pre": {
                        "timezone": "EST",
                        "start": 1732698000,
                        "end": 1732717800,
                        "gmtoffset": -18000
                    },
                    "regular": {
                        "timezone": "EST",
                        "start": 1732717800,
                        "end": 1732741200,
                        "gmtoffset": -18000
                    },
                    "post": {
                        "timezone": "EST",
                        "start": 1732741200,
                        "end": 1732755600,
                        "gmtoffset": -18000
                    }
                },
                "tradingPeriods": [
                    [
                        {
                            "timezone": "EST",
                            "start": 1732717800,
                            "end": 1732741200,
                            "gmtoffset": -18000
                        }
                    ]
                ],
                "dataGranularity": "1m",
                "range": "1d",
                "validRanges": [
                    "1d",
                    "5d",
                    "1mo",
                    "3mo",
                    "6mo",
                    "1y",
                    "2y",
                    "5y",
                    "ytd",
                    "max"
                ]
            },
            "timestamp": [
                1732717800,
                1732717860,
                1732717920,
                1732717980,
                1732718040,
                1732718100,
                1732718160,
                1732718220,
                1732718280,
                1732718340,
                1732718400,
                1732718460,
                1732718520,
                1732718580,
                1732718640,
                1732718700,
                1732718760,
                1732718820,
                1732718880,
                1732718940,
                1732719000,
                1732719060,
                1732719120,
                1732719180,
                1732719240,
                1732719300,
                1732719360,
                1732719420,
                1732719480,
                1732719540,
                1732719600,
                1732719660,
                1732719720,
                1732719780,
                1732719840,
                1732719900,
                1732719960,
                1732720020,
                1732720080,
                1732720140,
                1732720200,
                1732720260,
                1732720320,
                1732720380,
                1732720440,
                1732720500,
                1732720560,
                1732720620,
                1732720680,
                1732720740,
                1732720800,
                1732720860,
                1732720920,
                1732720980,
                1732721040,
                1732721100,
                1732721160,
                1732721220,
                1732721280,
                1732721340,
                1732721400,
                1732721460,
                1732721520,
                1732721580,
                1732721640,
                1732721700,
                1732721760,
                1732721820,
                1732721880,
                1732721940,
                1732722000,
                1732722060,
                1732722120,
                1732722180,
                1732722240,
                1732722300,
                1732722360,
                1732722420,
                1732722480,
                1732722540,
                1732722600,
                1732722660,
                1732722720,
                1732722780,
                1732722840,
                1732722900,
                1732722960,
                1732723020,
                1732723080,
                1732723140,
                1732723200,
                1732723260,
                1732723320,
                1732723380,
                1732723440,
                1732723500,
                1732723560,
                1732723620,
                1732723680,
                1732723740,
                1732723800,
                1732723860,
                1732723920,
                1732723980,
                1732724040,
                1732724100,
                1732724160,
                1732724220,
                1732724280,
                1732724340,
                1732724400,
                1732724460,
                1732724520,
                1732724580,
                1732724640,
                1732724700,
                1732724760,
                1732724820,
                1732724880,
                1732724940,
                1732725000,
                1732725060,
                1732725120,
                1732725180,
                1732725240,
                1732725300,
                1732725360,
                1732725420,
                1732725480,
                1732725540,
                1732725600,
                1732725660,
                1732725720,
                1732725780,
                1732725840,
                1732725900,
                1732725960,
                1732726020,
                1732726080,
                1732726140,
                1732726200,
                1732726260,
                1732726320,
                1732726380,
                1732726440,
                1732726500,
                1732726560,
                1732726620,
                1732726680,
                1732726740,
                1732726800,
                1732726860,
                1732726920,
                1732726980,
                1732727040,
                1732727100,
                1732727160,
                1732727220,
                1732727280,
                1732727340,
                1732727400,
                1732727460,
                1732727520,
                1732727580,
                1732727640,
                1732727700,
                1732727760,
                1732727820,
                1732727880,
                1732727940,
                1732728000,
                1732728060,
                1732728120,
                1732728180,
                1732728240,
                1732728300,
                1732728360,
                1732728420,
                1732728480,
                1732728540,
                1732728600,
                1732728660,
                1732728720,
                1732728780,
                1732728840,
                1732728900,
                1732728960,
                1732729020,
                1732729080,
                1732729140,
                1732729200,
                1732729260,
                1732729320,
                1732729380,
                1732729440,
                1732729500,
                1732729560,
                1732729620,
                1732729680,
                1732729740,
                1732729800,
                1732729860,
                1732729920,
                1732729980,
                1732730040,
                1732730100,
                1732730160,
                1732730220,
                1732730280,
                1732730340,
                1732730400,
                1732730460,
                1732730520,
                1732730580,
                1732730640,
                1732730700,
                1732730760,
                1732730820,
                1732730880,
                1732730940,
                1732731000,
                1732731060,
                1732731120,
                1732731180,
                1732731240,
                1732731300,
                1732731360,
                1732731420,
                1732731480,
                1732731540,
                1732731600,
                1732731660,
                1732731720,
                1732731780,
                1732731840,
                1732731900,
                1732731960,
                1732732020,
                1732732080,
                1732732140,
                1732732200,
                1732732260,
                1732732320,
                1732732380,
                1732732440,
                1732732500,
                1732732560,
                1732732620,
                1732732680,
                1732732740,
                1732732800,
                1732732860,
                1732732920,
                1732732980,
                1732733040,
                1732733100,
                1732733160,
                1732733220,
                1732733280,
                1732733340,
                1732733400,
                1732733460,
                1732733520,
                1732733580,
                1732733640,
                1732733700,
                1732733760,
                1732733820,
                1732733880,
                1732733940,
                1732734000,
                1732734060,
                1732734120,
                1732734180,
                1732734240,
                1732734300,
                1732734360,
                1732734420,
                1732734480,
                1732734540,
                1732734600,
                1732734660,
                1732734720,
                1732734780,
                1732734840,
                1732734900,
                1732734960,
                1732735020,
                1732735080,
                1732735140,
                1732735200,
                1732735260,
                1732735320,
                1732735380,
                1732735440,
                1732735500,
                1732735560,
                1732735620,
                1732735680,
                1732735740,
                1732735800,
                1732735860,
                1732735920,
                1732735980,
                1732736040,
                1732736100,
                1732736160,
                1732736220,
                1732736280,
                1732736340,
                1732736400,
                1732736460,
                1732736520,
                1732736580,
                1732736640,
                1732736700,
                1732736760,
                1732736820,
                1732736880,
                1732736940,
                1732736975
            ],
            "indicators": {
                "quote": [
                    {
                        "low": [
                            24,
                            23.31999969482422,
                            22.93000030517578,
                            23.229999542236328,
                            24.309999465942383,
                            24.75,
                            24.260000228881836,
                            24.050100326538086,
                            23.753000259399414,
                            23.860000610351562,
                            23.969999313354492,
                            24.520000457763672,
                            24.610000610351562,
                            24.399999618530273,
                            24.40999984741211,
                            24.719999313354492,
                            24.559999465942383,
                            24.614999771118164,
                            24.1200008392334,
                            24,
                            24.000099182128906,
                            24.15999984741211,
                            24.200000762939453,
                            24.399999618530273,
                            24.104999542236328,
                            24.020000457763672,
                            24,
                            24.290000915527344,
                            24.079999923706055,
                            24.060100555419922,
                            23.579999923706055,
                            23.650100708007812,
                            23.65999984741211,
                            23.854999542236328,
                            23.520000457763672,
                            23.40999984741211,
                            23.610000610351562,
                            23.70009994506836,
                            23.649999618530273,
                            23.459999084472656,
                            23.600099563598633,
                            23.570100784301758,
                            23.690000534057617,
                            23.84000015258789,
                            23.979999542236328,
                            23.8799991607666,
                            23.950000762939453,
                            24.100000381469727,
                            24.15999984741211,
                            24.040000915527344,
                            23.799999237060547,
                            23.649999618530273,
                            23.71980094909668,
                            23.770099639892578,
                            23.40999984741211,
                            23.354999542236328,
                            23.25,
                            23,
                            22.800100326538086,
                            22.5,
                            22.5,
                            22.560100555419922,
                            22.600000381469727,
                            22.75,
                            22.81999969482422,
                            22.820100784301758,
                            22.79010009765625,
                            22.790000915527344,
                            22.770000457763672,
                            22.81999969482422,
                            22.700000762939453,
                            22.600000381469727,
                            22.5,
                            22.799999237060547,
                            22.709999084472656,
                            22.600000381469727,
                            null,
                            null,
                            23.03660011291504,
                            23.01099967956543,
                            23,
                            23.047100067138672,
                            23.1299991607666,
                            23.190000534057617,
                            23.15999984741211,
                            23.150100708007812,
                            23.17009925842285,
                            23.100000381469727,
                            23.059999465942383,
                            23.059999465942383,
                            23.020000457763672,
                            23.03849983215332,
                            23.17300033569336,
                            23.270999908447266,
                            23.350000381469727,
                            23.300100326538086,
                            23.39900016784668,
                            23.500099182128906,
                            23.34000015258789,
                            23.45009994506836,
                            23.375,
                            23.209999084472656,
                            23.11009979248047,
                            23.100099563598633,
                            23.100000381469727,
                            22.899999618530273,
                            22.90999984741211,
                            22.800100326538086,
                            22.694900512695312,
                            22.61009979248047,
                            22.650100708007812,
                            22.70210075378418,
                            22.600000381469727,
                            22.520000457763672,
                            22.489999771118164,
                            22.190099716186523,
                            22.149999618530273,
                            22.139999389648438,
                            22.240100860595703,
                            22.360000610351562,
                            22.399999618530273,
                            22.38010025024414,
                            22.30940055847168,
                            22.309999465942383,
                            22.320100784301758,
                            22.350099563598633,
                            22.399999618530273,
                            22.459999084472656,
                            22.520000457763672,
                            22.5,
                            22.5,
                            22.510099411010742,
                            22.399999618530273,
                            22.36009979248047,
                            22.299999237060547,
                            22.299999237060547,
                            22.200000762939453,
                            21.93000030517578,
                            21.840099334716797,
                            21.88010025024414,
                            21.780000686645508,
                            21.790000915527344,
                            21.878000259399414,
                            21.850099563598633,
                            21.800100326538086,
                            21.84000015258789,
                            22.066999435424805,
                            22.219999313354492,
                            22.299999237060547,
                            22.260000228881836,
                            22.190000534057617,
                            22.1299991607666,
                            22.440000534057617,
                            22.610000610351562,
                            22.6200008392334,
                            22.725000381469727,
                            22.7450008392334,
                            22.780000686645508,
                            22.549999237060547,
                            22.600099563598633,
                            22.68470001220703,
                            22.764999389648438,
                            22.799999237060547,
                            22.767900466918945,
                            22.690099716186523,
                            22.71500015258789,
                            22.75,
                            22.780000686645508,
                            22.8700008392334,
                            22.89929962158203,
                            22.800100326538086,
                            22.85930061340332,
                            22.930200576782227,
                            22.980100631713867,
                            22.841999053955078,
                            22.829999923706055,
                            22.940099716186523,
                            23.040000915527344,
                            23.090099334716797,
                            23.140100479125977,
                            23.1200008392334,
                            23.135000228881836,
                            23.020000457763672,
                            23,
                            23.045000076293945,
                            23.125,
                            23.100099563598633,
                            23.100000381469727,
                            23.010000228881836,
                            23.020000457763672,
                            23.014999389648438,
                            23.079999923706055,
                            23.110000610351562,
                            23.079999923706055,
                            23.170000076293945,
                            23.184999465942383,
                            23.15999984741211,
                            23.1299991607666,
                            23.1200008392334,
                            23.174999237060547,
                            23.170000076293945,
                            23.060100555419922,
                            23.03499984741211,
                            23.1299991607666,
                            23,
                            23.024999618530273,
                            23.020000457763672,
                            23.09000015258789,
                            23.079999923706055,
                            23.09000015258789,
                            23.040000915527344,
                            23.09000015258789,
                            23.135000228881836,
                            23.250099182128906,
                            23.25,
                            23.31999969482422,
                            23.350000381469727,
                            23.399999618530273,
                            23.5,
                            23.549999237060547,
                            23.560100555419922,
                            23.57979965209961,
                            23.6299991607666,
                            23.500999450683594,
                            23.520000457763672,
                            23.635000228881836,
                            23.68000030517578,
                            23.709999084472656,
                            23.760000228881836,
                            23.800100326538086,
                            23.770000457763672,
                            23.739999771118164,
                            23.740100860595703,
                            23.729999542236328,
                            23.825000762939453,
                            23.710100173950195,
                            23.510000228881836,
                            23.317399978637695,
                            23.310100555419922,
                            23.399999618530273,
                            23.42009925842285,
                            23.450000762939453,
                            23.434999465942383,
                            23.450000762939453,
                            23.510000228881836,
                            23.500099182128906,
                            23.500099182128906,
                            23.40999984741211,
                            23.500099182128906,
                            23.440000534057617,
                            23.45009994506836,
                            23.31999969482422,
                            23.153200149536133,
                            23.105199813842773,
                            23.139999389648438,
                            23.049999237060547,
                            23.010000228881836,
                            23.010099411010742,
                            23.020000457763672,
                            23.041000366210938,
                            23.054899215698242,
                            23.100000381469727,
                            23.100000381469727,
                            23.090099334716797,
                            23.020000457763672,
                            23,
                            22.809999465942383,
                            22.75,
                            22.850099563598633,
                            22.729999542236328,
                            22.719999313354492,
                            22.649999618530273,
                            22.690000534057617,
                            22.670000076293945,
                            22.674999237060547,
                            22.68000030517578,
                            22.700000762939453,
                            22.690000534057617,
                            22.739999771118164,
                            22.710100173950195,
                            22.719999313354492,
                            22.700000762939453,
                            22.710100173950195,
                            22.72480010986328,
                            22.764799118041992,
                            22.83009910583496,
                            22.870100021362305,
                            22.973600387573242,
                            22.980100631713867,
                            22.850000381469727,
                            22.86009979248047,
                            22.875,
                            22.950000762939453,
                            22.9950008392334,
                            22.924999237060547,
                            22.8799991607666,
                            22.81999969482422,
                            22.800800323486328,
                            22.900100708007812,
                            22.864999771118164,
                            22.86009979248047,
                            22.8799991607666,
                            22.8799991607666,
                            22.8799991607666,
                            22.800100326538086,
                            22.46500015258789,
                            22.459999084472656,
                            22.55500030517578,
                            22.65999984741211,
                            22.79010009765625,
                            22.90999984741211,
                            22.799999237060547,
                            22.940000534057617,
                            23.07469940185547,
                            23.040000915527344,
                            23.149999618530273,
                            23.250099182128906,
                            23.299999237060547,
                            23.399999618530273,
                            null,
                            23.475000381469727
                        ],
                        "open": [
                            25.110000610351562,
                            23.959999084472656,
                            23.3799991607666,
                            23.276100158691406,
                            24.399999618530273,
                            24.979999542236328,
                            24.850000381469727,
                            24.639999389648438,
                            24.225000381469727,
                            23.993900299072266,
                            24.030000686645508,
                            24.670000076293945,
                            24.8700008392334,
                            24.75,
                            24.479299545288086,
                            25.05500030517578,
                            24.7549991607666,
                            24.709999084472656,
                            24.84000015258789,
                            24.110000610351562,
                            24.15999984741211,
                            24.209999084472656,
                            24.389999389648438,
                            24.415000915527344,
                            24.575000762939453,
                            24.149999618530273,
                            24.209999084472656,
                            24.290000915527344,
                            24.399999618530273,
                            24.29669952392578,
                            24.150100708007812,
                            23.75,
                            23.71500015258789,
                            24.029399871826172,
                            23.90169906616211,
                            23.540000915527344,
                            23.815000534057617,
                            23.81999969482422,
                            23.90999984741211,
                            23.790000915527344,
                            23.710100173950195,
                            23.604999542236328,
                            23.770000457763672,
                            23.96269989013672,
                            24,
                            24.010000228881836,
                            24.110000610351562,
                            24.1200008392334,
                            24.270000457763672,
                            24.174999237060547,
                            24.0049991607666,
                            23.93000030517578,
                            23.77549934387207,
                            23.824399948120117,
                            23.793899536132812,
                            23.450000762939453,
                            23.350099563598633,
                            23.360000610351562,
                            23.000099182128906,
                            22.829999923706055,
                            22.500099182128906,
                            22.600000381469727,
                            22.610000610351562,
                            22.760000228881836,
                            22.82699966430664,
                            22.895000457763672,
                            23.020000457763672,
                            22.8700008392334,
                            22.809999465942383,
                            22.939899444580078,
                            22.865299224853516,
                            22.8700008392334,
                            22.688400268554688,
                            22.844999313354492,
                            22.988399505615234,
                            22.969999313354492,
                            null,
                            null,
                            23.209699630737305,
                            23.190000534057617,
                            23.06999969482422,
                            23.18000030517578,
                            23.190000534057617,
                            23.225000381469727,
                            23.219999313354492,
                            23.200000762939453,
                            23.200000762939453,
                            23.209999084472656,
                            23.09000015258789,
                            23.18000030517578,
                            23.079999923706055,
                            23.03849983215332,
                            23.209999084472656,
                            23.280000686645508,
                            23.390100479125977,
                            23.350000381469727,
                            23.40999984741211,
                            23.56999969482422,
                            23.605899810791016,
                            23.469100952148438,
                            23.469999313354492,
                            23.3799991607666,
                            23.219999313354492,
                            23.155000686645508,
                            23.100000381469727,
                            23.149999618530273,
                            22.965200424194336,
                            22.96780014038086,
                            22.809999465942383,
                            22.690099716186523,
                            22.719999313354492,
                            22.719999313354492,
                            22.735000610351562,
                            22.590099334716797,
                            22.53499984741211,
                            22.489999771118164,
                            22.239999771118164,
                            22.18000030517578,
                            22.33049964904785,
                            22.360000610351562,
                            22.450000762939453,
                            22.420000076293945,
                            22.38010025024414,
                            22.31999969482422,
                            22.33449935913086,
                            22.399999618530273,
                            22.445199966430664,
                            22.459999084472656,
                            22.565000534057617,
                            22.596599578857422,
                            22.524999618530273,
                            22.524799346923828,
                            22.510000228881836,
                            22.40999984741211,
                            22.373199462890625,
                            22.30150032043457,
                            22.309999465942383,
                            22.204999923706055,
                            21.90999984741211,
                            21.98040008544922,
                            21.88010025024414,
                            21.790000915527344,
                            21.889999389648438,
                            21.895000457763672,
                            21.875,
                            21.84000015258789,
                            22.098400115966797,
                            22.25,
                            22.325000762939453,
                            22.30500030517578,
                            22.264999389648438,
                            22.190000534057617,
                            22.499900817871094,
                            22.610000610351562,
                            22.770000457763672,
                            22.739900588989258,
                            22.75,
                            22.784099578857422,
                            22.739999771118164,
                            22.6200008392334,
                            22.68470001220703,
                            22.764999389648438,
                            22.850500106811523,
                            22.979999542236328,
                            22.8700008392334,
                            22.71500015258789,
                            22.78499984741211,
                            22.829999923706055,
                            22.8799991607666,
                            22.89929962158203,
                            22.942399978637695,
                            22.860000610351562,
                            22.969999313354492,
                            23.020000457763672,
                            23.0049991607666,
                            22.850000381469727,
                            22.985000610351562,
                            23.040000915527344,
                            23.090099334716797,
                            23.190000534057617,
                            23.145000457763672,
                            23.155799865722656,
                            23.1299991607666,
                            23.08060073852539,
                            23.05739974975586,
                            23.142200469970703,
                            23.139999389648438,
                            23.190000534057617,
                            23.09000015258789,
                            23.069299697875977,
                            23.020099639892578,
                            23.094999313354492,
                            23.18000030517578,
                            23.110000610351562,
                            23.25,
                            23.229999542236328,
                            23.209999084472656,
                            23.209999084472656,
                            23.1200008392334,
                            23.174999237060547,
                            23.20009994506836,
                            23.178699493408203,
                            23.137399673461914,
                            23.149999618530273,
                            23.139999389648438,
                            23.040000915527344,
                            23.03499984741211,
                            23.110000610351562,
                            23.100200653076172,
                            23.13949966430664,
                            23.09000015258789,
                            23.1200008392334,
                            23.135000228881836,
                            23.250099182128906,
                            23.34000015258789,
                            23.3799991607666,
                            23.3700008392334,
                            23.424999237060547,
                            23.543899536132812,
                            23.600000381469727,
                            23.600000381469727,
                            23.59000015258789,
                            23.700000762939453,
                            23.65999984741211,
                            23.559999465942383,
                            23.639999389648438,
                            23.69339942932129,
                            23.747499465942383,
                            23.790000915527344,
                            23.84000015258789,
                            23.899999618530273,
                            23.82349967956543,
                            23.75,
                            23.790000915527344,
                            23.8799991607666,
                            23.815000534057617,
                            23.709999084472656,
                            23.520000457763672,
                            23.34000015258789,
                            23.500499725341797,
                            23.43000030517578,
                            23.514999389648438,
                            23.481599807739258,
                            23.450000762939453,
                            23.510000228881836,
                            23.5049991607666,
                            23.5049991607666,
                            23.5,
                            23.56999969482422,
                            23.5,
                            23.459999084472656,
                            23.454999923706055,
                            23.30500030517578,
                            23.170400619506836,
                            23.16990089416504,
                            23.149999618530273,
                            23.040000915527344,
                            23.020000457763672,
                            23.030000686645508,
                            23.049999237060547,
                            23.05500030517578,
                            23.104999542236328,
                            23.1072998046875,
                            23.104400634765625,
                            23.099899291992188,
                            23.020099639892578,
                            23.000099182128906,
                            22.81999969482422,
                            22.88129997253418,
                            22.860000610351562,
                            22.7450008392334,
                            22.729900360107422,
                            22.690000534057617,
                            22.719999313354492,
                            22.739999771118164,
                            22.68000030517578,
                            22.739999771118164,
                            22.72369956970215,
                            22.780000686645508,
                            22.739999771118164,
                            22.739999771118164,
                            22.729900360107422,
                            22.729999542236328,
                            22.729999542236328,
                            22.764799118041992,
                            22.84980010986328,
                            22.889999389648438,
                            22.985000610351562,
                            23.020000457763672,
                            22.988000869750977,
                            22.877500534057617,
                            22.875,
                            23.02989959716797,
                            23,
                            23.03499984741211,
                            22.95989990234375,
                            22.88360023498535,
                            22.820100784301758,
                            22.920000076293945,
                            22.920000076293945,
                            22.86009979248047,
                            22.88990020751953,
                            22.885000228881836,
                            22.885000228881836,
                            22.8882999420166,
                            22.799999237060547,
                            22.469999313354492,
                            22.599000930786133,
                            22.740100860595703,
                            22.809999465942383,
                            22.9507999420166,
                            22.91010093688965,
                            22.95949935913086,
                            23.133399963378906,
                            23.139999389648438,
                            23.15999984741211,
                            23.28499984741211,
                            23.309999465942383,
                            23.43000030517578,
                            null,
                            23.475000381469727
                        ],
                        "close": [
                            24,
                            23.34040069580078,
                            23.239999771118164,
                            24.219999313354492,
                            24.898799896240234,
                            24.860000610351562,
                            24.68000030517578,
                            24.225000381469727,
                            23.983999252319336,
                            24.002099990844727,
                            24.600000381469727,
                            24.825000762939453,
                            24.770000457763672,
                            24.399999618530273,
                            25.100000381469727,
                            24.7549991607666,
                            24.700000762939453,
                            24.84869956970215,
                            24.149999618530273,
                            24.204200744628906,
                            24.229999542236328,
                            24.367000579833984,
                            24.478599548339844,
                            24.59429931640625,
                            24.149999618530273,
                            24.190000534057617,
                            24.360000610351562,
                            24.309999465942383,
                            24.2450008392334,
                            24.170000076293945,
                            23.75,
                            23.6924991607666,
                            24.020000457763672,
                            23.96500015258789,
                            23.545000076293945,
                            23.815000534057617,
                            23.799999237060547,
                            23.859500885009766,
                            23.780000686645508,
                            23.718000411987305,
                            23.670000076293945,
                            23.710100173950195,
                            23.999900817871094,
                            24.037099838256836,
                            24.010000228881836,
                            24.100000381469727,
                            24.063400268554688,
                            24.242700576782227,
                            24.170000076293945,
                            24.040000915527344,
                            23.959999084472656,
                            23.710100173950195,
                            23.850000381469727,
                            23.770099639892578,
                            23.41550064086914,
                            23.424100875854492,
                            23.350000381469727,
                            23.0049991607666,
                            22.829999923706055,
                            22.524999618530273,
                            22.560100555419922,
                            22.600099563598633,
                            22.760000228881836,
                            22.826499938964844,
                            22.893999099731445,
                            23.003799438476562,
                            22.850000381469727,
                            22.809999465942383,
                            22.940000534057617,
                            22.889999389648438,
                            22.8700008392334,
                            22.600000381469727,
                            22.889999389648438,
                            22.98889923095703,
                            22.93000030517578,
                            22.7450008392334,
                            null,
                            null,
                            23.205699920654297,
                            23.040000915527344,
                            23.11750030517578,
                            23.170000076293945,
                            23.25,
                            23.219999313354492,
                            23.174999237060547,
                            23.200000762939453,
                            23.209999084472656,
                            23.100000381469727,
                            23.19569969177246,
                            23.079999923706055,
                            23.065000534057617,
                            23.200000762939453,
                            23.280000686645508,
                            23.350000381469727,
                            23.3700008392334,
                            23.43000030517578,
                            23.56879997253418,
                            23.601900100708008,
                            23.459999084472656,
                            23.510000228881836,
                            23.375,
                            23.260000228881836,
                            23.155000686645508,
                            23.125,
                            23.155000686645508,
                            23.009000778198242,
                            22.950000762939453,
                            22.815099716186523,
                            22.694900512695312,
                            22.690000534057617,
                            22.704999923706055,
                            22.72010040283203,
                            22.600099563598633,
                            22.53499984741211,
                            22.490100860595703,
                            22.225000381469727,
                            22.149999618530273,
                            22.350000381469727,
                            22.3799991607666,
                            22.429899215698242,
                            22.429899215698242,
                            22.38990020751953,
                            22.350000381469727,
                            22.343799591064453,
                            22.41830062866211,
                            22.440099716186523,
                            22.459999084472656,
                            22.552799224853516,
                            22.56999969482422,
                            22.535900115966797,
                            22.530000686645508,
                            22.514999389648438,
                            22.424999237060547,
                            22.3799991607666,
                            22.30500030517578,
                            22.299999237060547,
                            22.201900482177734,
                            21.93000030517578,
                            21.979999542236328,
                            21.88010025024414,
                            21.78499984741211,
                            21.860000610351562,
                            21.885799407958984,
                            21.89900016784668,
                            21.850000381469727,
                            22.06999969482422,
                            22.290000915527344,
                            22.325000762939453,
                            22.309900283813477,
                            22.264999389648438,
                            22.19099998474121,
                            22.46500015258789,
                            22.622400283813477,
                            22.770000457763672,
                            22.739099502563477,
                            22.7893009185791,
                            22.780899047851562,
                            22.780000686645508,
                            22.590099334716797,
                            22.67009925842285,
                            22.770000457763672,
                            22.85540008544922,
                            23,
                            22.81999969482422,
                            22.71500015258789,
                            22.770000457763672,
                            22.79680061340332,
                            22.90999984741211,
                            22.905000686645508,
                            22.969999313354492,
                            22.860000610351562,
                            22.969999313354492,
                            23.020000457763672,
                            22.980100631713867,
                            22.844999313354492,
                            22.959999084472656,
                            23.03499984741211,
                            23.100000381469727,
                            23.190000534057617,
                            23.145599365234375,
                            23.170000076293945,
                            23.139999389648438,
                            23.020099639892578,
                            23.030000686645508,
                            23.149999618530273,
                            23.1299991607666,
                            23.18000030517578,
                            23.114999771118164,
                            23.062000274658203,
                            23.020099639892578,
                            23.100000381469727,
                            23.149999618530273,
                            23.110000610351562,
                            23.2450008392334,
                            23.249900817871094,
                            23.19499969482422,
                            23.209999084472656,
                            23.1299991607666,
                            23.174999237060547,
                            23.204999923706055,
                            23.17009925842285,
                            23.100000381469727,
                            23.148799896240234,
                            23.170000076293945,
                            23.050600051879883,
                            23.03499984741211,
                            23.11989974975586,
                            23.110000610351562,
                            23.126800537109375,
                            23.100000381469727,
                            23.1200008392334,
                            23.15999984741211,
                            23.270999908447266,
                            23.34000015258789,
                            23.3799991607666,
                            23.350000381469727,
                            23.381000518798828,
                            23.559900283813477,
                            23.560100555419922,
                            23.588499069213867,
                            23.604999542236328,
                            23.69499969482422,
                            23.639999389648438,
                            23.559900283813477,
                            23.639999389648438,
                            23.700000762939453,
                            23.75,
                            23.764999389648438,
                            23.809999465942383,
                            23.885000228881836,
                            23.802799224853516,
                            23.809999465942383,
                            23.760000228881836,
                            23.8700008392334,
                            23.825000762939453,
                            23.715099334716797,
                            23.530099868774414,
                            23.363000869750977,
                            23.469999313354492,
                            23.42930030822754,
                            23.510000228881836,
                            23.459999084472656,
                            23.479900360107422,
                            23.4950008392334,
                            23.520000457763672,
                            23.5049991607666,
                            23.500999450683594,
                            23.600000381469727,
                            23.549999237060547,
                            23.469999313354492,
                            23.454999923706055,
                            23.31999969482422,
                            23.200000762939453,
                            23.13010025024414,
                            23.154399871826172,
                            23.050399780273438,
                            23.010099411010742,
                            23.030099868774414,
                            23.04990005493164,
                            23.049999237060547,
                            23.110000610351562,
                            23.104400634765625,
                            23.104999542236328,
                            23.094999313354492,
                            23.020000457763672,
                            23.0049991607666,
                            22.829999923706055,
                            22.877500534057617,
                            22.899999618530273,
                            22.756000518798828,
                            22.729999542236328,
                            22.690000534057617,
                            22.719999313354492,
                            22.735000610351562,
                            22.674999237060547,
                            22.7450008392334,
                            22.71500015258789,
                            22.780000686645508,
                            22.75,
                            22.739999771118164,
                            22.739999771118164,
                            22.729999542236328,
                            22.719999313354492,
                            22.765600204467773,
                            22.84000015258789,
                            22.881000518798828,
                            22.985000610351562,
                            23.000099182128906,
                            22.98430061340332,
                            22.850000381469727,
                            22.86009979248047,
                            23.030000686645508,
                            22.989999771118164,
                            23.020099639892578,
                            22.924999237060547,
                            22.881900787353516,
                            22.81999969482422,
                            22.93000030517578,
                            22.910999298095703,
                            22.8700008392334,
                            22.885000228881836,
                            22.88010025024414,
                            22.885000228881836,
                            22.889999389648438,
                            22.80820083618164,
                            22.469999313354492,
                            22.59000015258789,
                            22.749500274658203,
                            22.80500030517578,
                            22.950000762939453,
                            22.915000915527344,
                            22.93000030517578,
                            23.1200008392334,
                            23.153900146484375,
                            23.194299697875977,
                            23.28499984741211,
                            23.338300704956055,
                            23.427499771118164,
                            23.469999313354492,
                            null,
                            23.475000381469727
                        ],
                        "high": [
                            25.110000610351562,
                            23.959999084472656,
                            23.45949935913086,
                            24.450000762939453,
                            25.472000122070312,
                            25.15999984741211,
                            24.91550064086914,
                            24.809999465942383,
                            24.34000015258789,
                            24.040000915527344,
                            24.68000030517578,
                            24.92620086669922,
                            24.959999084472656,
                            24.790000915527344,
                            25.190000534057617,
                            25.089599609375,
                            24.782899856567383,
                            24.850000381469727,
                            24.850000381469727,
                            24.439899444580078,
                            24.229999542236328,
                            24.53499984741211,
                            24.5,
                            24.66990089416504,
                            24.600000381469727,
                            24.219900131225586,
                            24.3799991607666,
                            24.530000686645508,
                            24.399999618530273,
                            24.639999389648438,
                            24.150100708007812,
                            23.999900817871094,
                            24.3799991607666,
                            24.09000015258789,
                            24.038999557495117,
                            23.889999389648438,
                            23.83839988708496,
                            23.950000762939453,
                            23.920000076293945,
                            23.790000915527344,
                            23.790000915527344,
                            23.846799850463867,
                            24,
                            24.087200164794922,
                            24.260000228881836,
                            24.219999313354492,
                            24.290000915527344,
                            24.290000915527344,
                            24.5,
                            24.38800048828125,
                            24.071300506591797,
                            23.93000030517578,
                            23.889999389648438,
                            23.899999618530273,
                            23.793899536132812,
                            23.489999771118164,
                            23.399999618530273,
                            23.360000610351562,
                            23.010000228881836,
                            22.829999923706055,
                            22.729900360107422,
                            22.739999771118164,
                            22.799999237060547,
                            22.950000762939453,
                            22.950000762939453,
                            23.04990005493164,
                            23.049800872802734,
                            23,
                            22.940000534057617,
                            22.939899444580078,
                            22.90999984741211,
                            22.8700008392334,
                            22.90999984741211,
                            23,
                            23,
                            23,
                            null,
                            null,
                            23.20989990234375,
                            23.25,
                            23.18000030517578,
                            23.229999542236328,
                            23.270000457763672,
                            23.25,
                            23.25,
                            23.219999313354492,
                            23.25,
                            23.25,
                            23.209999084472656,
                            23.25,
                            23.139999389648438,
                            23.23590087890625,
                            23.40999984741211,
                            23.43000030517578,
                            23.469600677490234,
                            23.5,
                            23.579999923706055,
                            23.63920021057129,
                            23.642200469970703,
                            23.59000015258789,
                            23.520000457763672,
                            23.43000030517578,
                            23.271799087524414,
                            23.239999771118164,
                            23.219999313354492,
                            23.18000030517578,
                            23.010000228881836,
                            22.96780014038086,
                            22.825000762939453,
                            22.725000381469727,
                            22.739999771118164,
                            22.829999923706055,
                            22.739999771118164,
                            22.590099334716797,
                            22.56999969482422,
                            22.489999771118164,
                            22.3799991607666,
                            22.399999618530273,
                            22.389999389648438,
                            22.479400634765625,
                            22.579999923706055,
                            22.469999313354492,
                            22.450000762939453,
                            22.384700775146484,
                            22.5,
                            22.46940040588379,
                            22.469999313354492,
                            22.648399353027344,
                            22.649999618530273,
                            22.599599838256836,
                            22.540000915527344,
                            22.63949966430664,
                            22.520000457763672,
                            22.487600326538086,
                            22.3799991607666,
                            22.34000015258789,
                            22.309999465942383,
                            22.209999084472656,
                            22.010000228881836,
                            22.020000457763672,
                            21.940000534057617,
                            21.950000762939453,
                            21.999900817871094,
                            21.944000244140625,
                            21.899999618530273,
                            22.149999618530273,
                            22.329999923706055,
                            22.360000610351562,
                            22.440000534057617,
                            22.30500030517578,
                            22.290000915527344,
                            22.5,
                            22.68000030517578,
                            22.850000381469727,
                            22.799999237060547,
                            22.850000381469727,
                            22.81999969482422,
                            22.790000915527344,
                            22.770000457763672,
                            22.774599075317383,
                            22.839000701904297,
                            22.8700008392334,
                            23.020000457763672,
                            23.020000457763672,
                            22.8700008392334,
                            22.816999435424805,
                            22.84000015258789,
                            22.9143009185791,
                            23.010000228881836,
                            22.969999313354492,
                            22.942399978637695,
                            22.979999542236328,
                            23.03499984741211,
                            23.079999923706055,
                            23.009599685668945,
                            22.959999084472656,
                            23.052499771118164,
                            23.1200008392334,
                            23.190000534057617,
                            23.200000762939453,
                            23.25,
                            23.229999542236328,
                            23.15999984741211,
                            23.08060073852539,
                            23.149999618530273,
                            23.1924991607666,
                            23.25,
                            23.200000762939453,
                            23.139999389648438,
                            23.06999969482422,
                            23.100000381469727,
                            23.179899215698242,
                            23.25,
                            23.25,
                            23.25,
                            23.25,
                            23.25,
                            23.329999923706055,
                            23.219999313354492,
                            23.25,
                            23.209999084472656,
                            23.200000762939453,
                            23.18000030517578,
                            23.229999542236328,
                            23.139999389648438,
                            23.09000015258789,
                            23.11989974975586,
                            23.18000030517578,
                            23.15999984741211,
                            23.13990020751953,
                            23.170000076293945,
                            23.170000076293945,
                            23.290000915527344,
                            23.360000610351562,
                            23.399999618530273,
                            23.420000076293945,
                            23.450000762939453,
                            23.559999465942383,
                            23.600000381469727,
                            23.691600799560547,
                            23.65999984741211,
                            23.729999542236328,
                            23.719900131225586,
                            23.65999984741211,
                            23.649999618530273,
                            23.709999084472656,
                            23.760000228881836,
                            23.770000457763672,
                            23.8799991607666,
                            23.90999984741211,
                            23.90999984741211,
                            23.850000381469727,
                            23.799999237060547,
                            23.8799991607666,
                            23.920000076293945,
                            23.815000534057617,
                            23.709999084472656,
                            23.540000915527344,
                            23.559999465942383,
                            23.500499725341797,
                            23.540000915527344,
                            23.600000381469727,
                            23.510000228881836,
                            23.530000686645508,
                            23.559900283813477,
                            23.514999389648438,
                            23.510000228881836,
                            23.609800338745117,
                            23.600000381469727,
                            23.549999237060547,
                            23.459999084472656,
                            23.459999084472656,
                            23.325000762939453,
                            23.254499435424805,
                            23.173099517822266,
                            23.149999618530273,
                            23.06999969482422,
                            23.059900283813477,
                            23.110000610351562,
                            23.100000381469727,
                            23.1200008392334,
                            23.139999389648438,
                            23.110000610351562,
                            23.13990020751953,
                            23.099899291992188,
                            23.030000686645508,
                            23.0049991607666,
                            22.90999984741211,
                            22.899999618530273,
                            22.875,
                            22.770000457763672,
                            22.729900360107422,
                            22.729999542236328,
                            22.75,
                            22.739999771118164,
                            22.75,
                            22.747600555419922,
                            22.790000915527344,
                            22.81999969482422,
                            22.770000457763672,
                            22.770000457763672,
                            22.760000228881836,
                            22.739999771118164,
                            22.82859992980957,
                            22.899999618530273,
                            22.93000030517578,
                            23.010000228881836,
                            23.075000762939453,
                            23.020000457763672,
                            22.989999771118164,
                            22.969999313354492,
                            23.040000915527344,
                            23.02989959716797,
                            23.06999969482422,
                            23.049999237060547,
                            22.95989990234375,
                            22.885000228881836,
                            22.940000534057617,
                            22.969999313354492,
                            22.920000076293945,
                            22.90999984741211,
                            22.88990020751953,
                            22.899999618530273,
                            22.895000457763672,
                            22.889999389648438,
                            22.800100326538086,
                            22.659900665283203,
                            22.780000686645508,
                            22.827999114990234,
                            23.020000457763672,
                            22.969900131225586,
                            23.049999237060547,
                            23.139999389648438,
                            23.18000030517578,
                            23.209999084472656,
                            23.325700759887695,
                            23.34000015258789,
                            23.44700050354004,
                            23.48349952697754,
                            null,
                            23.475000381469727
                        ],
                        "volume": [
                            1621055,
                            276367,
                            522559,
                            229462,
                            219421,
                            138150,
                            112717,
                            66564,
                            169984,
                            86923,
                            114361,
                            100828,
                            59593,
                            70334,
                            69753,
                            179740,
                            89809,
                            111983,
                            154658,
                            125218,
                            74843,
                            37944,
                            65914,
                            56153,
                            68710,
                            38512,
                            186429,
                            42326,
                            39593,
                            88258,
                            197923,
                            71961,
                            136093,
                            43821,
                            113128,
                            107938,
                            47467,
                            61179,
                            43956,
                            106133,
                            98867,
                            35375,
                            96750,
                            36462,
                            119245,
                            51240,
                            56667,
                            85860,
                            68256,
                            30226,
                            65585,
                            54781,
                            26014,
                            26088,
                            129728,
                            83256,
                            82792,
                            149949,
                            253338,
                            208642,
                            202936,
                            85367,
                            73892,
                            73637,
                            38703,
                            110396,
                            50417,
                            76965,
                            39942,
                            58794,
                            68135,
                            131047,
                            113482,
                            67329,
                            65883,
                            60177,
                            null,
                            null,
                            211333,
                            65780,
                            28896,
                            73766,
                            73415,
                            27499,
                            58980,
                            24117,
                            49694,
                            38289,
                            17951,
                            31573,
                            31482,
                            28189,
                            92100,
                            39494,
                            50463,
                            28602,
                            32040,
                            48956,
                            60319,
                            36846,
                            55562,
                            51731,
                            38666,
                            32447,
                            16784,
                            115838,
                            35338,
                            36859,
                            53398,
                            74867,
                            53989,
                            68433,
                            58611,
                            61674,
                            89597,
                            162027,
                            103882,
                            85371,
                            57215,
                            58074,
                            64731,
                            58546,
                            39903,
                            21452,
                            33189,
                            19162,
                            29727,
                            45074,
                            60229,
                            36386,
                            22328,
                            43369,
                            82130,
                            57495,
                            41008,
                            72972,
                            50634,
                            222486,
                            101449,
                            54810,
                            84736,
                            58275,
                            42740,
                            30157,
                            50760,
                            65095,
                            93052,
                            44164,
                            53538,
                            27966,
                            28091,
                            44529,
                            75072,
                            54437,
                            42139,
                            50435,
                            33788,
                            29573,
                            52964,
                            25587,
                            41709,
                            23807,
                            65242,
                            38403,
                            36336,
                            19303,
                            28915,
                            21389,
                            39945,
                            29547,
                            29889,
                            30419,
                            20579,
                            39017,
                            24595,
                            29935,
                            24076,
                            35298,
                            26321,
                            23734,
                            40637,
                            18547,
                            28635,
                            23209,
                            27427,
                            14144,
                            25858,
                            18719,
                            25270,
                            10846,
                            12501,
                            34718,
                            19944,
                            51615,
                            43686,
                            34944,
                            44097,
                            60386,
                            22824,
                            20095,
                            17471,
                            46030,
                            35783,
                            15672,
                            27280,
                            12514,
                            22538,
                            16684,
                            11502,
                            6291,
                            15992,
                            15131,
                            31656,
                            17070,
                            26851,
                            20434,
                            21177,
                            35257,
                            38912,
                            34698,
                            18406,
                            23117,
                            32948,
                            33502,
                            30335,
                            21236,
                            23677,
                            32476,
                            27549,
                            26875,
                            37040,
                            46954,
                            21810,
                            15831,
                            34194,
                            31769,
                            33684,
                            58359,
                            32182,
                            30705,
                            12860,
                            19778,
                            22157,
                            11795,
                            17956,
                            6099,
                            7180,
                            39080,
                            26129,
                            22631,
                            9631,
                            30053,
                            44151,
                            19463,
                            16047,
                            43383,
                            18773,
                            18067,
                            29821,
                            17452,
                            24276,
                            19508,
                            8309,
                            30513,
                            12300,
                            13361,
                            89952,
                            37983,
                            13441,
                            26122,
                            25992,
                            20899,
                            13564,
                            36836,
                            17563,
                            15478,
                            17400,
                            22130,
                            22356,
                            17798,
                            21153,
                            30030,
                            11604,
                            18448,
                            18914,
                            19696,
                            22605,
                            33950,
                            10463,
                            43134,
                            19731,
                            35681,
                            10887,
                            23813,
                            20924,
                            21900,
                            17339,
                            57424,
                            59574,
                            30355,
                            18150,
                            10171,
                            22786,
                            19574,
                            57028,
                            154341,
                            50668,
                            32257,
                            26316,
                            31685,
                            11775,
                            23611,
                            24897,
                            15271,
                            35938,
                            38886,
                            31174,
                            31547,
                            25605,
                            null,
                            0
                        ]
                    }
                ]
            }
        }
        const examplePremarketData = {
            "low": [
                24,
                23.31999969482422,
                22.93000030517578,
                23.229999542236328,
                24.309999465942383,
                24.75,
                24.260000228881836,
                24.050100326538086,
                23.753000259399414,
                23.860000610351562,
                23.969999313354492,
                24.520000457763672,
                24.610000610351562,
                24.399999618530273,
                24.40999984741211,
                24.719999313354492,
                24.559999465942383,
                24.614999771118164,
                24.1200008392334,
                24,
                24.000099182128906,
                24.15999984741211,
                24.200000762939453,
                24.399999618530273,
                24.104999542236328,
                24.020000457763672,
                24,
                24.290000915527344,
                24.079999923706055,
                24.060100555419922,
                23.579999923706055,
                23.650100708007812,
                23.65999984741211,
                23.854999542236328,
                23.520000457763672,
                23.40999984741211,
                23.610000610351562,
                23.70009994506836,
                23.649999618530273,
                23.459999084472656,
                23.600099563598633,
                23.570100784301758,
                23.690000534057617,
                23.84000015258789,
                23.979999542236328,
                23.8799991607666,
                23.950000762939453,
                24.100000381469727,
                24.15999984741211,
                24.040000915527344,
                23.799999237060547,
                23.649999618530273,
                23.71980094909668,
                23.770099639892578,
                23.40999984741211,
                23.354999542236328,
                23.25,
                23,
                22.800100326538086,
                22.5,
                22.5,
                22.560100555419922,
                22.600000381469727,
                22.75,
                22.81999969482422,
                22.820100784301758,
                22.79010009765625,
                22.790000915527344,
                22.770000457763672,
                22.81999969482422,
                22.700000762939453,
                22.600000381469727,
                22.5,
                22.799999237060547,
                22.709999084472656,
                22.600000381469727,
                null,
                null,
                23.03660011291504,
                23.01099967956543,
                23,
                23.047100067138672,
                23.1299991607666,
                23.190000534057617,
                23.15999984741211,
                23.150100708007812,
                23.17009925842285,
                23.100000381469727,
                23.059999465942383,
                23.059999465942383,
                23.020000457763672,
                23.03849983215332,
                23.17300033569336,
                23.270999908447266,
                23.350000381469727,
                23.300100326538086,
                23.39900016784668,
                23.500099182128906,
                23.34000015258789,
                23.45009994506836,
                23.375,
                23.209999084472656,
                23.11009979248047,
                23.100099563598633,
                23.100000381469727,
                22.899999618530273,
                22.90999984741211,
                22.800100326538086,
                22.694900512695312,
                22.61009979248047,
                22.650100708007812,
                22.70210075378418,
                22.600000381469727,
                22.520000457763672,
                22.489999771118164,
                22.190099716186523,
                22.149999618530273,
                22.139999389648438,
                22.240100860595703,
                22.360000610351562,
                22.399999618530273,
                22.38010025024414,
                22.30940055847168,
                22.309999465942383,
                22.320100784301758,
                22.350099563598633,
                22.399999618530273,
                22.459999084472656,
                22.520000457763672,
                22.5,
                22.5,
                22.510099411010742,
                22.399999618530273,
                22.36009979248047,
                22.299999237060547,
                22.299999237060547,
                22.200000762939453,
                21.93000030517578,
                21.840099334716797,
                21.88010025024414,
                21.780000686645508,
                21.790000915527344,
                21.878000259399414,
                21.850099563598633,
                21.800100326538086,
                21.84000015258789,
                22.066999435424805,
                22.219999313354492,
                22.299999237060547,
                22.260000228881836,
                22.190000534057617,
                22.1299991607666,
                22.440000534057617,
                22.610000610351562,
                22.6200008392334,
                22.725000381469727,
                22.7450008392334,
                22.780000686645508,
                22.549999237060547,
                22.600099563598633,
                22.68470001220703,
                22.764999389648438,
                22.799999237060547,
                22.767900466918945,
                22.690099716186523,
                22.71500015258789,
                22.75,
                22.780000686645508,
                22.8700008392334,
                22.89929962158203,
                22.800100326538086,
                22.85930061340332,
                22.930200576782227,
                22.980100631713867,
                22.841999053955078,
                22.829999923706055,
                22.940099716186523,
                23.040000915527344,
                23.090099334716797,
                23.140100479125977,
                23.1200008392334,
                23.135000228881836,
                23.020000457763672,
                23,
                23.045000076293945,
                23.125,
                23.100099563598633,
                23.100000381469727,
                23.010000228881836,
                23.020000457763672,
                23.014999389648438,
                23.079999923706055,
                23.110000610351562,
                23.079999923706055,
                23.170000076293945,
                23.184999465942383,
                23.15999984741211,
                23.1299991607666,
                23.1200008392334,
                23.174999237060547,
                23.170000076293945,
                23.060100555419922,
                23.03499984741211,
                23.1299991607666,
                23,
                23.024999618530273,
                23.020000457763672,
                23.09000015258789,
                23.079999923706055,
                23.09000015258789,
                23.040000915527344,
                23.09000015258789,
                23.135000228881836,
                23.250099182128906,
                23.25,
                23.31999969482422,
                23.350000381469727,
                23.399999618530273,
                23.5,
                23.549999237060547,
                23.560100555419922,
                23.57979965209961,
                23.6299991607666,
                23.500999450683594,
                23.520000457763672,
                23.635000228881836,
                23.68000030517578,
                23.709999084472656,
                23.760000228881836,
                23.800100326538086,
                23.770000457763672,
                23.739999771118164,
                23.740100860595703,
                23.729999542236328,
                23.825000762939453,
                23.710100173950195,
                23.510000228881836,
                23.317399978637695,
                23.310100555419922,
                23.399999618530273,
                23.42009925842285,
                23.450000762939453,
                23.434999465942383,
                23.450000762939453,
                23.510000228881836,
                23.500099182128906,
                23.500099182128906,
                23.40999984741211,
                23.500099182128906,
                23.440000534057617,
                23.45009994506836,
                23.31999969482422,
                23.153200149536133,
                23.105199813842773,
                23.139999389648438,
                23.049999237060547,
                23.010000228881836,
                23.010099411010742,
                23.020000457763672,
                23.041000366210938,
                23.054899215698242,
                23.100000381469727,
                23.100000381469727,
                23.090099334716797,
                23.020000457763672,
                23,
                22.809999465942383,
                22.75,
                22.850099563598633,
                22.729999542236328,
                22.719999313354492,
                22.649999618530273,
                22.690000534057617,
                22.670000076293945,
                22.674999237060547,
                22.68000030517578,
                22.700000762939453,
                22.690000534057617,
                22.739999771118164,
                22.710100173950195,
                22.719999313354492,
                22.700000762939453,
                22.710100173950195,
                22.72480010986328,
                22.764799118041992,
                22.83009910583496,
                22.870100021362305,
                22.973600387573242,
                22.980100631713867,
                22.850000381469727,
                22.86009979248047,
                22.875,
                22.950000762939453,
                22.9950008392334,
                22.924999237060547,
                22.8799991607666,
                22.81999969482422,
                22.800800323486328,
                22.900100708007812,
                22.864999771118164,
                22.86009979248047,
                22.8799991607666,
                22.8799991607666,
                22.8799991607666,
                22.800100326538086,
                22.46500015258789,
                22.459999084472656,
                22.55500030517578,
                22.65999984741211,
                22.79010009765625,
                22.90999984741211,
                22.799999237060547,
                22.940000534057617,
                23.07469940185547,
                23.040000915527344,
                23.149999618530273,
                23.250099182128906,
                23.299999237060547,
                23.399999618530273,
                null,
                23.475000381469727
            ],
            "open": [
                25.110000610351562,
                23.959999084472656,
                23.3799991607666,
                23.276100158691406,
                24.399999618530273,
                24.979999542236328,
                24.850000381469727,
                24.639999389648438,
                24.225000381469727,
                23.993900299072266,
                24.030000686645508,
                24.670000076293945,
                24.8700008392334,
                24.75,
                24.479299545288086,
                25.05500030517578,
                24.7549991607666,
                24.709999084472656,
                24.84000015258789,
                24.110000610351562,
                24.15999984741211,
                24.209999084472656,
                24.389999389648438,
                24.415000915527344,
                24.575000762939453,
                24.149999618530273,
                24.209999084472656,
                24.290000915527344,
                24.399999618530273,
                24.29669952392578,
                24.150100708007812,
                23.75,
                23.71500015258789,
                24.029399871826172,
                23.90169906616211,
                23.540000915527344,
                23.815000534057617,
                23.81999969482422,
                23.90999984741211,
                23.790000915527344,
                23.710100173950195,
                23.604999542236328,
                23.770000457763672,
                23.96269989013672,
                24,
                24.010000228881836,
                24.110000610351562,
                24.1200008392334,
                24.270000457763672,
                24.174999237060547,
                24.0049991607666,
                23.93000030517578,
                23.77549934387207,
                23.824399948120117,
                23.793899536132812,
                23.450000762939453,
                23.350099563598633,
                23.360000610351562,
                23.000099182128906,
                22.829999923706055,
                22.500099182128906,
                22.600000381469727,
                22.610000610351562,
                22.760000228881836,
                22.82699966430664,
                22.895000457763672,
                23.020000457763672,
                22.8700008392334,
                22.809999465942383,
                22.939899444580078,
                22.865299224853516,
                22.8700008392334,
                22.688400268554688,
                22.844999313354492,
                22.988399505615234,
                22.969999313354492,
                null,
                null,
                23.209699630737305,
                23.190000534057617,
                23.06999969482422,
                23.18000030517578,
                23.190000534057617,
                23.225000381469727,
                23.219999313354492,
                23.200000762939453,
                23.200000762939453,
                23.209999084472656,
                23.09000015258789,
                23.18000030517578,
                23.079999923706055,
                23.03849983215332,
                23.209999084472656,
                23.280000686645508,
                23.390100479125977,
                23.350000381469727,
                23.40999984741211,
                23.56999969482422,
                23.605899810791016,
                23.469100952148438,
                23.469999313354492,
                23.3799991607666,
                23.219999313354492,
                23.155000686645508,
                23.100000381469727,
                23.149999618530273,
                22.965200424194336,
                22.96780014038086,
                22.809999465942383,
                22.690099716186523,
                22.719999313354492,
                22.719999313354492,
                22.735000610351562,
                22.590099334716797,
                22.53499984741211,
                22.489999771118164,
                22.239999771118164,
                22.18000030517578,
                22.33049964904785,
                22.360000610351562,
                22.450000762939453,
                22.420000076293945,
                22.38010025024414,
                22.31999969482422,
                22.33449935913086,
                22.399999618530273,
                22.445199966430664,
                22.459999084472656,
                22.565000534057617,
                22.596599578857422,
                22.524999618530273,
                22.524799346923828,
                22.510000228881836,
                22.40999984741211,
                22.373199462890625,
                22.30150032043457,
                22.309999465942383,
                22.204999923706055,
                21.90999984741211,
                21.98040008544922,
                21.88010025024414,
                21.790000915527344,
                21.889999389648438,
                21.895000457763672,
                21.875,
                21.84000015258789,
                22.098400115966797,
                22.25,
                22.325000762939453,
                22.30500030517578,
                22.264999389648438,
                22.190000534057617,
                22.499900817871094,
                22.610000610351562,
                22.770000457763672,
                22.739900588989258,
                22.75,
                22.784099578857422,
                22.739999771118164,
                22.6200008392334,
                22.68470001220703,
                22.764999389648438,
                22.850500106811523,
                22.979999542236328,
                22.8700008392334,
                22.71500015258789,
                22.78499984741211,
                22.829999923706055,
                22.8799991607666,
                22.89929962158203,
                22.942399978637695,
                22.860000610351562,
                22.969999313354492,
                23.020000457763672,
                23.0049991607666,
                22.850000381469727,
                22.985000610351562,
                23.040000915527344,
                23.090099334716797,
                23.190000534057617,
                23.145000457763672,
                23.155799865722656,
                23.1299991607666,
                23.08060073852539,
                23.05739974975586,
                23.142200469970703,
                23.139999389648438,
                23.190000534057617,
                23.09000015258789,
                23.069299697875977,
                23.020099639892578,
                23.094999313354492,
                23.18000030517578,
                23.110000610351562,
                23.25,
                23.229999542236328,
                23.209999084472656,
                23.209999084472656,
                23.1200008392334,
                23.174999237060547,
                23.20009994506836,
                23.178699493408203,
                23.137399673461914,
                23.149999618530273,
                23.139999389648438,
                23.040000915527344,
                23.03499984741211,
                23.110000610351562,
                23.100200653076172,
                23.13949966430664,
                23.09000015258789,
                23.1200008392334,
                23.135000228881836,
                23.250099182128906,
                23.34000015258789,
                23.3799991607666,
                23.3700008392334,
                23.424999237060547,
                23.543899536132812,
                23.600000381469727,
                23.600000381469727,
                23.59000015258789,
                23.700000762939453,
                23.65999984741211,
                23.559999465942383,
                23.639999389648438,
                23.69339942932129,
                23.747499465942383,
                23.790000915527344,
                23.84000015258789,
                23.899999618530273,
                23.82349967956543,
                23.75,
                23.790000915527344,
                23.8799991607666,
                23.815000534057617,
                23.709999084472656,
                23.520000457763672,
                23.34000015258789,
                23.500499725341797,
                23.43000030517578,
                23.514999389648438,
                23.481599807739258,
                23.450000762939453,
                23.510000228881836,
                23.5049991607666,
                23.5049991607666,
                23.5,
                23.56999969482422,
                23.5,
                23.459999084472656,
                23.454999923706055,
                23.30500030517578,
                23.170400619506836,
                23.16990089416504,
                23.149999618530273,
                23.040000915527344,
                23.020000457763672,
                23.030000686645508,
                23.049999237060547,
                23.05500030517578,
                23.104999542236328,
                23.1072998046875,
                23.104400634765625,
                23.099899291992188,
                23.020099639892578,
                23.000099182128906,
                22.81999969482422,
                22.88129997253418,
                22.860000610351562,
                22.7450008392334,
                22.729900360107422,
                22.690000534057617,
                22.719999313354492,
                22.739999771118164,
                22.68000030517578,
                22.739999771118164,
                22.72369956970215,
                22.780000686645508,
                22.739999771118164,
                22.739999771118164,
                22.729900360107422,
                22.729999542236328,
                22.729999542236328,
                22.764799118041992,
                22.84980010986328,
                22.889999389648438,
                22.985000610351562,
                23.020000457763672,
                22.988000869750977,
                22.877500534057617,
                22.875,
                23.02989959716797,
                23,
                23.03499984741211,
                22.95989990234375,
                22.88360023498535,
                22.820100784301758,
                22.920000076293945,
                22.920000076293945,
                22.86009979248047,
                22.88990020751953,
                22.885000228881836,
                22.885000228881836,
                22.8882999420166,
                22.799999237060547,
                22.469999313354492,
                22.599000930786133,
                22.740100860595703,
                22.809999465942383,
                22.9507999420166,
                22.91010093688965,
                22.95949935913086,
                23.133399963378906,
                23.139999389648438,
                23.15999984741211,
                23.28499984741211,
                23.309999465942383,
                23.43000030517578,
                null,
                23.475000381469727
            ],
            "close": [
                24,
                23.34040069580078,
                23.239999771118164,
                24.219999313354492,
                24.898799896240234,
                24.860000610351562,
                24.68000030517578,
                24.225000381469727,
                23.983999252319336,
                24.002099990844727,
                24.600000381469727,
                24.825000762939453,
                24.770000457763672,
                24.399999618530273,
                25.100000381469727,
                24.7549991607666,
                24.700000762939453,
                24.84869956970215,
                24.149999618530273,
                24.204200744628906,
                24.229999542236328,
                24.367000579833984,
                24.478599548339844,
                24.59429931640625,
                24.149999618530273,
                24.190000534057617,
                24.360000610351562,
                24.309999465942383,
                24.2450008392334,
                24.170000076293945,
                23.75,
                23.6924991607666,
                24.020000457763672,
                23.96500015258789,
                23.545000076293945,
                23.815000534057617,
                23.799999237060547,
                23.859500885009766,
                23.780000686645508,
                23.718000411987305,
                23.670000076293945,
                23.710100173950195,
                23.999900817871094,
                24.037099838256836,
                24.010000228881836,
                24.100000381469727,
                24.063400268554688,
                24.242700576782227,
                24.170000076293945,
                24.040000915527344,
                23.959999084472656,
                23.710100173950195,
                23.850000381469727,
                23.770099639892578,
                23.41550064086914,
                23.424100875854492,
                23.350000381469727,
                23.0049991607666,
                22.829999923706055,
                22.524999618530273,
                22.560100555419922,
                22.600099563598633,
                22.760000228881836,
                22.826499938964844,
                22.893999099731445,
                23.003799438476562,
                22.850000381469727,
                22.809999465942383,
                22.940000534057617,
                22.889999389648438,
                22.8700008392334,
                22.600000381469727,
                22.889999389648438,
                22.98889923095703,
                22.93000030517578,
                22.7450008392334,
                null,
                null,
                23.205699920654297,
                23.040000915527344,
                23.11750030517578,
                23.170000076293945,
                23.25,
                23.219999313354492,
                23.174999237060547,
                23.200000762939453,
                23.209999084472656,
                23.100000381469727,
                23.19569969177246,
                23.079999923706055,
                23.065000534057617,
                23.200000762939453,
                23.280000686645508,
                23.350000381469727,
                23.3700008392334,
                23.43000030517578,
                23.56879997253418,
                23.601900100708008,
                23.459999084472656,
                23.510000228881836,
                23.375,
                23.260000228881836,
                23.155000686645508,
                23.125,
                23.155000686645508,
                23.009000778198242,
                22.950000762939453,
                22.815099716186523,
                22.694900512695312,
                22.690000534057617,
                22.704999923706055,
                22.72010040283203,
                22.600099563598633,
                22.53499984741211,
                22.490100860595703,
                22.225000381469727,
                22.149999618530273,
                22.350000381469727,
                22.3799991607666,
                22.429899215698242,
                22.429899215698242,
                22.38990020751953,
                22.350000381469727,
                22.343799591064453,
                22.41830062866211,
                22.440099716186523,
                22.459999084472656,
                22.552799224853516,
                22.56999969482422,
                22.535900115966797,
                22.530000686645508,
                22.514999389648438,
                22.424999237060547,
                22.3799991607666,
                22.30500030517578,
                22.299999237060547,
                22.201900482177734,
                21.93000030517578,
                21.979999542236328,
                21.88010025024414,
                21.78499984741211,
                21.860000610351562,
                21.885799407958984,
                21.89900016784668,
                21.850000381469727,
                22.06999969482422,
                22.290000915527344,
                22.325000762939453,
                22.309900283813477,
                22.264999389648438,
                22.19099998474121,
                22.46500015258789,
                22.622400283813477,
                22.770000457763672,
                22.739099502563477,
                22.7893009185791,
                22.780899047851562,
                22.780000686645508,
                22.590099334716797,
                22.67009925842285,
                22.770000457763672,
                22.85540008544922,
                23,
                22.81999969482422,
                22.71500015258789,
                22.770000457763672,
                22.79680061340332,
                22.90999984741211,
                22.905000686645508,
                22.969999313354492,
                22.860000610351562,
                22.969999313354492,
                23.020000457763672,
                22.980100631713867,
                22.844999313354492,
                22.959999084472656,
                23.03499984741211,
                23.100000381469727,
                23.190000534057617,
                23.145599365234375,
                23.170000076293945,
                23.139999389648438,
                23.020099639892578,
                23.030000686645508,
                23.149999618530273,
                23.1299991607666,
                23.18000030517578,
                23.114999771118164,
                23.062000274658203,
                23.020099639892578,
                23.100000381469727,
                23.149999618530273,
                23.110000610351562,
                23.2450008392334,
                23.249900817871094,
                23.19499969482422,
                23.209999084472656,
                23.1299991607666,
                23.174999237060547,
                23.204999923706055,
                23.17009925842285,
                23.100000381469727,
                23.148799896240234,
                23.170000076293945,
                23.050600051879883,
                23.03499984741211,
                23.11989974975586,
                23.110000610351562,
                23.126800537109375,
                23.100000381469727,
                23.1200008392334,
                23.15999984741211,
                23.270999908447266,
                23.34000015258789,
                23.3799991607666,
                23.350000381469727,
                23.381000518798828,
                23.559900283813477,
                23.560100555419922,
                23.588499069213867,
                23.604999542236328,
                23.69499969482422,
                23.639999389648438,
                23.559900283813477,
                23.639999389648438,
                23.700000762939453,
                23.75,
                23.764999389648438,
                23.809999465942383,
                23.885000228881836,
                23.802799224853516,
                23.809999465942383,
                23.760000228881836,
                23.8700008392334,
                23.825000762939453,
                23.715099334716797,
                23.530099868774414,
                23.363000869750977,
                23.469999313354492,
                23.42930030822754,
                23.510000228881836,
                23.459999084472656,
                23.479900360107422,
                23.4950008392334,
                23.520000457763672,
                23.5049991607666,
                23.500999450683594,
                23.600000381469727,
                23.549999237060547,
                23.469999313354492,
                23.454999923706055,
                23.31999969482422,
                23.200000762939453,
                23.13010025024414,
                23.154399871826172,
                23.050399780273438,
                23.010099411010742,
                23.030099868774414,
                23.04990005493164,
                23.049999237060547,
                23.110000610351562,
                23.104400634765625,
                23.104999542236328,
                23.094999313354492,
                23.020000457763672,
                23.0049991607666,
                22.829999923706055,
                22.877500534057617,
                22.899999618530273,
                22.756000518798828,
                22.729999542236328,
                22.690000534057617,
                22.719999313354492,
                22.735000610351562,
                22.674999237060547,
                22.7450008392334,
                22.71500015258789,
                22.780000686645508,
                22.75,
                22.739999771118164,
                22.739999771118164,
                22.729999542236328,
                22.719999313354492,
                22.765600204467773,
                22.84000015258789,
                22.881000518798828,
                22.985000610351562,
                23.000099182128906,
                22.98430061340332,
                22.850000381469727,
                22.86009979248047,
                23.030000686645508,
                22.989999771118164,
                23.020099639892578,
                22.924999237060547,
                22.881900787353516,
                22.81999969482422,
                22.93000030517578,
                22.910999298095703,
                22.8700008392334,
                22.885000228881836,
                22.88010025024414,
                22.885000228881836,
                22.889999389648438,
                22.80820083618164,
                22.469999313354492,
                22.59000015258789,
                22.749500274658203,
                22.80500030517578,
                22.950000762939453,
                22.915000915527344,
                22.93000030517578,
                23.1200008392334,
                23.153900146484375,
                23.194299697875977,
                23.28499984741211,
                23.338300704956055,
                23.427499771118164,
                23.469999313354492,
                null,
                23.475000381469727
            ],
            "high": [
                25.110000610351562,
                23.959999084472656,
                23.45949935913086,
                24.450000762939453,
                25.472000122070312,
                25.15999984741211,
                24.91550064086914,
                24.809999465942383,
                24.34000015258789,
                24.040000915527344,
                24.68000030517578,
                24.92620086669922,
                24.959999084472656,
                24.790000915527344,
                25.190000534057617,
                25.089599609375,
                24.782899856567383,
                24.850000381469727,
                24.850000381469727,
                24.439899444580078,
                24.229999542236328,
                24.53499984741211,
                24.5,
                24.66990089416504,
                24.600000381469727,
                24.219900131225586,
                24.3799991607666,
                24.530000686645508,
                24.399999618530273,
                24.639999389648438,
                24.150100708007812,
                23.999900817871094,
                24.3799991607666,
                24.09000015258789,
                24.038999557495117,
                23.889999389648438,
                23.83839988708496,
                23.950000762939453,
                23.920000076293945,
                23.790000915527344,
                23.790000915527344,
                23.846799850463867,
                24,
                24.087200164794922,
                24.260000228881836,
                24.219999313354492,
                24.290000915527344,
                24.290000915527344,
                24.5,
                24.38800048828125,
                24.071300506591797,
                23.93000030517578,
                23.889999389648438,
                23.899999618530273,
                23.793899536132812,
                23.489999771118164,
                23.399999618530273,
                23.360000610351562,
                23.010000228881836,
                22.829999923706055,
                22.729900360107422,
                22.739999771118164,
                22.799999237060547,
                22.950000762939453,
                22.950000762939453,
                23.04990005493164,
                23.049800872802734,
                23,
                22.940000534057617,
                22.939899444580078,
                22.90999984741211,
                22.8700008392334,
                22.90999984741211,
                23,
                23,
                23,
                null,
                null,
                23.20989990234375,
                23.25,
                23.18000030517578,
                23.229999542236328,
                23.270000457763672,
                23.25,
                23.25,
                23.219999313354492,
                23.25,
                23.25,
                23.209999084472656,
                23.25,
                23.139999389648438,
                23.23590087890625,
                23.40999984741211,
                23.43000030517578,
                23.469600677490234,
                23.5,
                23.579999923706055,
                23.63920021057129,
                23.642200469970703,
                23.59000015258789,
                23.520000457763672,
                23.43000030517578,
                23.271799087524414,
                23.239999771118164,
                23.219999313354492,
                23.18000030517578,
                23.010000228881836,
                22.96780014038086,
                22.825000762939453,
                22.725000381469727,
                22.739999771118164,
                22.829999923706055,
                22.739999771118164,
                22.590099334716797,
                22.56999969482422,
                22.489999771118164,
                22.3799991607666,
                22.399999618530273,
                22.389999389648438,
                22.479400634765625,
                22.579999923706055,
                22.469999313354492,
                22.450000762939453,
                22.384700775146484,
                22.5,
                22.46940040588379,
                22.469999313354492,
                22.648399353027344,
                22.649999618530273,
                22.599599838256836,
                22.540000915527344,
                22.63949966430664,
                22.520000457763672,
                22.487600326538086,
                22.3799991607666,
                22.34000015258789,
                22.309999465942383,
                22.209999084472656,
                22.010000228881836,
                22.020000457763672,
                21.940000534057617,
                21.950000762939453,
                21.999900817871094,
                21.944000244140625,
                21.899999618530273,
                22.149999618530273,
                22.329999923706055,
                22.360000610351562,
                22.440000534057617,
                22.30500030517578,
                22.290000915527344,
                22.5,
                22.68000030517578,
                22.850000381469727,
                22.799999237060547,
                22.850000381469727,
                22.81999969482422,
                22.790000915527344,
                22.770000457763672,
                22.774599075317383,
                22.839000701904297,
                22.8700008392334,
                23.020000457763672,
                23.020000457763672,
                22.8700008392334,
                22.816999435424805,
                22.84000015258789,
                22.9143009185791,
                23.010000228881836,
                22.969999313354492,
                22.942399978637695,
                22.979999542236328,
                23.03499984741211,
                23.079999923706055,
                23.009599685668945,
                22.959999084472656,
                23.052499771118164,
                23.1200008392334,
                23.190000534057617,
                23.200000762939453,
                23.25,
                23.229999542236328,
                23.15999984741211,
                23.08060073852539,
                23.149999618530273,
                23.1924991607666,
                23.25,
                23.200000762939453,
                23.139999389648438,
                23.06999969482422,
                23.100000381469727,
                23.179899215698242,
                23.25,
                23.25,
                23.25,
                23.25,
                23.25,
                23.329999923706055,
                23.219999313354492,
                23.25,
                23.209999084472656,
                23.200000762939453,
                23.18000030517578,
                23.229999542236328,
                23.139999389648438,
                23.09000015258789,
                23.11989974975586,
                23.18000030517578,
                23.15999984741211,
                23.13990020751953,
                23.170000076293945,
                23.170000076293945,
                23.290000915527344,
                23.360000610351562,
                23.399999618530273,
                23.420000076293945,
                23.450000762939453,
                23.559999465942383,
                23.600000381469727,
                23.691600799560547,
                23.65999984741211,
                23.729999542236328,
                23.719900131225586,
                23.65999984741211,
                23.649999618530273,
                23.709999084472656,
                23.760000228881836,
                23.770000457763672,
                23.8799991607666,
                23.90999984741211,
                23.90999984741211,
                23.850000381469727,
                23.799999237060547,
                23.8799991607666,
                23.920000076293945,
                23.815000534057617,
                23.709999084472656,
                23.540000915527344,
                23.559999465942383,
                23.500499725341797,
                23.540000915527344,
                23.600000381469727,
                23.510000228881836,
                23.530000686645508,
                23.559900283813477,
                23.514999389648438,
                23.510000228881836,
                23.609800338745117,
                23.600000381469727,
                23.549999237060547,
                23.459999084472656,
                23.459999084472656,
                23.325000762939453,
                23.254499435424805,
                23.173099517822266,
                23.149999618530273,
                23.06999969482422,
                23.059900283813477,
                23.110000610351562,
                23.100000381469727,
                23.1200008392334,
                23.139999389648438,
                23.110000610351562,
                23.13990020751953,
                23.099899291992188,
                23.030000686645508,
                23.0049991607666,
                22.90999984741211,
                22.899999618530273,
                22.875,
                22.770000457763672,
                22.729900360107422,
                22.729999542236328,
                22.75,
                22.739999771118164,
                22.75,
                22.747600555419922,
                22.790000915527344,
                22.81999969482422,
                22.770000457763672,
                22.770000457763672,
                22.760000228881836,
                22.739999771118164,
                22.82859992980957,
                22.899999618530273,
                22.93000030517578,
                23.010000228881836,
                23.075000762939453,
                23.020000457763672,
                22.989999771118164,
                22.969999313354492,
                23.040000915527344,
                23.02989959716797,
                23.06999969482422,
                23.049999237060547,
                22.95989990234375,
                22.885000228881836,
                22.940000534057617,
                22.969999313354492,
                22.920000076293945,
                22.90999984741211,
                22.88990020751953,
                22.899999618530273,
                22.895000457763672,
                22.889999389648438,
                22.800100326538086,
                22.659900665283203,
                22.780000686645508,
                22.827999114990234,
                23.020000457763672,
                22.969900131225586,
                23.049999237060547,
                23.139999389648438,
                23.18000030517578,
                23.209999084472656,
                23.325700759887695,
                23.34000015258789,
                23.44700050354004,
                23.48349952697754,
                null,
                23.475000381469727
            ],
            "volume": [
                1621055,
                276367,
                522559,
                229462,
                219421,
                138150,
                112717,
                66564,
                169984,
                86923,
                114361,
                100828,
                59593,
                70334,
                69753,
                179740,
                89809,
                111983,
                154658,
                125218,
                74843,
                37944,
                65914,
                56153,
                68710,
                38512,
                186429,
                42326,
                39593,
                88258,
                197923,
                71961,
                136093,
                43821,
                113128,
                107938,
                47467,
                61179,
                43956,
                106133,
                98867,
                35375,
                96750,
                36462,
                119245,
                51240,
                56667,
                85860,
                68256,
                30226,
                65585,
                54781,
                26014,
                26088,
                129728,
                83256,
                82792,
                149949,
                253338,
                208642,
                202936,
                85367,
                73892,
                73637,
                38703,
                110396,
                50417,
                76965,
                39942,
                58794,
                68135,
                131047,
                113482,
                67329,
                65883,
                60177,
                null,
                null,
                211333,
                65780,
                28896,
                73766,
                73415,
                27499,
                58980,
                24117,
                49694,
                38289,
                17951,
                31573,
                31482,
                28189,
                92100,
                39494,
                50463,
                28602,
                32040,
                48956,
                60319,
                36846,
                55562,
                51731,
                38666,
                32447,
                16784,
                115838,
                35338,
                36859,
                53398,
                74867,
                53989,
                68433,
                58611,
                61674,
                89597,
                162027,
                103882,
                85371,
                57215,
                58074,
                64731,
                58546,
                39903,
                21452,
                33189,
                19162,
                29727,
                45074,
                60229,
                36386,
                22328,
                43369,
                82130,
                57495,
                41008,
                72972,
                50634,
                222486,
                101449,
                54810,
                84736,
                58275,
                42740,
                30157,
                50760,
                65095,
                93052,
                44164,
                53538,
                27966,
                28091,
                44529,
                75072,
                54437,
                42139,
                50435,
                33788,
                29573,
                52964,
                25587,
                41709,
                23807,
                65242,
                38403,
                36336,
                19303,
                28915,
                21389,
                39945,
                29547,
                29889,
                30419,
                20579,
                39017,
                24595,
                29935,
                24076,
                35298,
                26321,
                23734,
                40637,
                18547,
                28635,
                23209,
                27427,
                14144,
                25858,
                18719,
                25270,
                10846,
                12501,
                34718,
                19944,
                51615,
                43686,
                34944,
                44097,
                60386,
                22824,
                20095,
                17471,
                46030,
                35783,
                15672,
                27280,
                12514,
                22538,
                16684,
                11502,
                6291,
                15992,
                15131,
                31656,
                17070,
                26851,
                20434,
                21177,
                35257,
                38912,
                34698,
                18406,
                23117,
                32948,
                33502,
                30335,
                21236,
                23677,
                32476,
                27549,
                26875,
                37040,
                46954,
                21810,
                15831,
                34194,
                31769,
                33684,
                58359,
                32182,
                30705,
                12860,
                19778,
                22157,
                11795,
                17956,
                6099,
                7180,
                39080,
                26129,
                22631,
                9631,
                30053,
                44151,
                19463,
                16047,
                43383,
                18773,
                18067,
                29821,
                17452,
                24276,
                19508,
                8309,
                30513,
                12300,
                13361,
                89952,
                37983,
                13441,
                26122,
                25992,
                20899,
                13564,
                36836,
                17563,
                15478,
                17400,
                22130,
                22356,
                17798,
                21153,
                30030,
                11604,
                18448,
                18914,
                19696,
                22605,
                33950,
                10463,
                43134,
                19731,
                35681,
                10887,
                23813,
                20924,
                21900,
                17339,
                57424,
                59574,
                30355,
                18150,
                10171,
                22786,
                19574,
                57028,
                154341,
                50668,
                32257,
                26316,
                31685,
                11775,
                23611,
                24897,
                15271,
                35938,
                38886,
                31174,
                31547,
                25605,
                null,
                0
            ]
        }

        let preMarketHigh = 0, preMarketVolume = 0;
        timestamps.forEach((timestamp, index) => {
            const time = new Date(timestamp * 1000);
            const preMarketStart = new Date().setHours(4, 0, 0, 0);
            const preMarketEnd = new Date().setHours(9, 30, 0, 0);
            if (time >= preMarketStart && time <= preMarketEnd) {
                preMarketHigh = Math.max(preMarketHigh, preMarketData.high[index]);
                preMarketVolume += preMarketData.volume[index];
            }
        });

        const lastClose = data.meta.previousClose;
        return {
            ticker,
            lastClose,
            preMarketHigh,
            preMarketVolume,
            priceChangePercent: ((preMarketHigh - lastClose) / lastClose) * 100
        };
    } catch (error) {
        console.error(`Error fetching pre-market data for ${ticker}:`, error.message);
        return null;
    }
}


/**
 * Fetch trending tickers dynamically using Yahoo Finance.
 * @returns {Array} List of trending tickers with pre-market data.
 */
async function fetchTrendingTickers() {
    try {
        const queryOptions = { count: 100, lang: 'en-US' };
        const trending = await yahooFinance.trendingSymbols('US', queryOptions); // Replace 'US' with your desired market
        const tickers = trending.quotes.map((quote) => ({
            symbol: quote.symbol,
            shortName: quote.shortName,
            priceChange: quote.regularMarketChangePercent,
        }));

        // Return ranked tickers by price change
        return tickers.sort((a, b) => b.priceChange - a.priceChange);
    } catch (error) {
        console.error('Error fetching trending tickers:', error.message);
        return [];
    }
}

/**
 * Fetches pre-market tickers, filters based on thresholds, and ranks them.
 * @returns {Array} List of ranked pre-market tickers with details.
 */
async function fetchAndRankPreMarketTickers() {
    // const tickers = ['AAPL', 'TSLA', 'MSFT', 'NVDA']; // Replace or dynamically fetch more tickers
    const dynamicTickers = await fetchTrendingTickers(); // or fetchDynamicTickers or scrapePreMarketMovers
    const topTickers = dynamicTickers.slice(0, 10); // Limit to top 10 movers

    const rankedTickers = [];

    for (const ticker of topTickers) {
        try {
            // Fetch pre-market data for the ticker
            const quote = await yahooFinance.quote(ticker.symbol, { modules: ['price'] });
            let example = {
                "quoteType": "EQUITY",
                "triggerable": true,
                "customPriceAlertConfidence": "HIGH",
                "currency": "USD",
                "regularMarketChangePercent": -11.76323, // monitor this
                "regularMarketPrice": 125.0668, // monitor this
                "marketState": "REGULAR",
                "exchange": "NYQ",
                "shortName": "Dell Technologies Inc.",
                "exchangeTimezoneName": "America/New_York",
                "exchangeTimezoneShortName": "EST",
                "gmtOffSetMilliseconds": -18000000,
                "market": "us_market",
                "esgPopulated": false,
                "sourceInterval": 15,
                "exchangeDataDelayedBy": 0,
                "averageAnalystRating": "1.7 - Buy", // monitor this
                "tradeable": false,
                "cryptoTradeable": false,
                "earningsTimestamp": "2025-02-27T10:59:00.000Z", // monitor this
                "trailingAnnualDividendRate": 0,
                "trailingPE": 22.09661, // monitor this
                "dividendRate": 1.78,   // monitor this
                "trailingAnnualDividendYield": 0,
                "dividendYield": 1.26,  // monitor this
                "epsTrailingTwelveMonths": 5.66,
                "epsForward": 9.4,
                "epsCurrentYear": 7.82036,
                "priceEpsCurrentYear": 15.99246,
                "sharesOutstanding": 333873984,
                "bookValue": -3.41, // ???
                "fiftyDayAverage": 126.9162,
                "fiftyDayAverageChange": -1.8493958, // monitor this
                "fiftyDayAverageChangePercent": -0.014571787,
                "twoHundredDayAverage": 122.51725,
                "twoHundredDayAverageChange": 2.549553,
                "twoHundredDayAverageChangePercent": 0.020809747,
                "marketCap": 87796400128, // important
                "forwardPE": 13.304979, // important
                "priceToBook": -36.67648, // ??
                "hasPrePostMarketData": true,
                "firstTradeDateMilliseconds": "2016-08-17T13:30:00.000Z",
                "priceHint": 2, // ??
                "regularMarketChange": -16.673203,
                "regularMarketTime": "2024-11-27T18:34:26.000Z",
                "regularMarketDayHigh": 127.16,
                "regularMarketDayRange": { // very important
                "low": 121.3,
                    "high": 127.16
                },
                "regularMarketDayLow": 121.3,
                "regularMarketVolume": 30706441,
                "regularMarketPreviousClose": 141.74,
                "bid": 124.9, // use this
                "ask": 124.93, // use this
                "bidSize": 10, // use this
                "askSize": 12, // use this
                "fullExchangeName": "NYSE",
                "financialCurrency": "USD",
                "regularMarketOpen": 124.92,
                "averageDailyVolume3Month": 9662754,
                "averageDailyVolume10Day": 6918000,
                "fiftyTwoWeekLowChange": 57.5568,
                "fiftyTwoWeekLowChangePercent": 0.852567,
                "fiftyTwoWeekRange": {
                    "low": 67.51, "high": 179.7
                },
                "fiftyTwoWeekHighChange": -54.633194,
                "fiftyTwoWeekHighChangePercent": -0.30402446,
                "fiftyTwoWeekLow": 67.51,
                "fiftyTwoWeekHigh": 179.7,
                "fiftyTwoWeekChangePercent": 88.835594,
                "dividendDate": "2024-11-01T00:00:00.000Z",
                "displayName": "Dell",
                "symbol": "DELL"
            }
            // Bid/Ask Price, Volume, Spread, Margin, Leverage, Stop-loss, and Limit Orders.
            // Moving Averages (MA): Identify trends.
            // Relative Strength Index (RSI): Overbought or oversold conditions.
            // Technical Indicators:
            // VWAP (Volume Weighted Average Price): Key for intraday trading.
            // Pre-Market High/Low Levels: Use as breakout or reversal points.
            // Bollinger Bands: Gauge volatility.
            // Fibonacci Retracements: Find potential reversal levels.
            // Learn to identify patterns:
            // Head and Shoulders, Double Top/Bottom, Flags, Triangles.
            // Never risk more than 1-2% of your total capital on a single trade.

            // questions:
            // VWAP (Volume Weighted Average Price): Key for intraday trading.- how to use it? how to calculate it?
            // Spread, Margin, Leverage - how to use it? how to calculate it?

            const preMarketPrice = quote.preMarketPrice || null;
            const preMarketChange = quote.preMarketChangePercent || 0;
            const volume = quote.regularMarketVolume || 0;
            const regularMarketPreviousClose = quote.regularMarketPreviousClose || 0;
            const changeFromPrecCloseThreshold = 1+(5/100);
            const tradingThreshold = 1000000;
            const spread = quote.ask - quote.bid; // trading price. we need spread to be low as possible
            const margin = quote.bidSize - quote.askSize;
            const leverage = quote.bidSize / quote.askSize;
            const stopLoss = quote.bid - quote.bid * 0.03;
            const marketCapEntry = 2 * 1000 * 1000 * 1000; // 2 billion
            if (preMarketPrice && preMarketChange > 2 &&
                preMarketPrice * changeFromPrecCloseThreshold >= regularMarketPreviousClose &&
                preMarketPrice * volume > tradingThreshold &&
                quote.marketCap > marketCapEntry) {
                rankedTickers.push({
                    symbol: ticker.symbol,
                    preMarketPrice,
                    preMarketChange,
                    volume,
                });
            } else {
                console.log(`Skipping ${ticker.symbol}: No pre-market data: preMarketPrice=${preMarketPrice}, preMarketChange=${preMarketChange}, volume=${volume}`);
            }
        } catch (error) {
            console.error(`Error fetching data for ${ticker.symbol}:`, error.message);
        }
    }

    // Sort by highest pre-market price change percentage
    return rankedTickers.sort((a, b) => b.preMarketChange - a.preMarketChange);
}



async function fetchNewsForTicker(ticker) {
    const newsEndpoint = `https://finnhub.io/api/v1/news?category=general&token=your_api_key`;
    try {
        const response = await axios.get(`${newsEndpoint}&q=${ticker}`);
        return response.data.map((news) => ({
            headline: news.headline,
            source: news.source,
            sentiment: news.sentiment, // If available
        }));
    } catch (error) {
        console.error(`Error fetching news for ${ticker}:`, error.message);
        return [];
    }
}

async function identifyStrongTickers() {
    const tickers = await fetchAndRankPreMarketTickers();

    // Fetch news for each ticker
    for (const ticker of tickers) {
        // Currently disabled due to API key requirement
        // const news = await fetchNewsForTicker(ticker.symbol);
        const news = [1, 2, 3]; // Placeholder for news
        ticker.news = news; // Attach news to ticker
    }

    // Filter by news sentiment (if available)
    const strongTickers = tickers.filter((t) => t.news.length > 0); // Optional: Add sentiment filtering

    console.log('Strong Pre-Market Tickers:', strongTickers);
    return strongTickers;
}


// Function to place orders (Buy/Sell)
async function placeOrder(ticker, qty, side = 'buy') {
    try {
        if (side === 'buy') {
            const lastPrice = await alpaca.getLatestTrade(ticker);
            const estimatedCost = qty * lastPrice.Price;

            // Check if the purchase exceeds the daily budget
            if (dailySpent + estimatedCost > DAILY_BUDGET) {
                console.log(`Skipping ${ticker}: Exceeds daily budget. Remaining budget: $${(DAILY_BUDGET - dailySpent).toFixed(2)}`);
                return;
            }

            dailySpent += estimatedCost; // Update daily spending
            console.log(`Buying ${ticker}: Estimated cost = $${estimatedCost.toFixed(2)}. Remaining budget: $${(DAILY_BUDGET - dailySpent).toFixed(2)}`);
        }

        await alpaca.createOrder({
            symbol: ticker,
            qty,
            side,
            type: 'market',
            time_in_force: 'day'
        });

        console.log(`Order placed: ${side} ${qty} shares of ${ticker}`);
    } catch (error) {
        console.error(`Error placing order for ${ticker}:`, error.message);
    }
}

// Function to manage portfolio (Sell Logic)
async function managePortfolio() {
    try {
        const positions = await alpaca.getPositions();
        for (const position of positions) {
            const ticker = position.symbol;
            const qty = position.qty;
            const currentPrice = parseFloat(position.current_price);
            const avgEntryPrice = parseFloat(position.avg_entry_price);

            const profitTarget = avgEntryPrice * 1.05; // 5% profit target
            const stopLoss = avgEntryPrice * 0.97; // 3% stop loss

            if (currentPrice >= profitTarget) {
                console.log(`Selling ${ticker}: Hit 5% profit target.`);
                await placeOrder(ticker, qty, 'sell');
            } else if (currentPrice <= stopLoss) {
                console.log(`Selling ${ticker}: Hit stop-loss.`);
                await placeOrder(ticker, qty, 'sell');
            } else {
                console.log(`Holding ${ticker}: Conditions not met.`);
            }
        }
    } catch (error) {
        console.error('Error managing portfolio:', error.message);
    }
}

// Main Lambda handler
const runTradingScript = async () => {
    try {
        // const tickers = ['AAPL', 'TSLA', 'MSFT', 'NVDA']; // Replace with your watchlist

        // Step 1: Identify Strong Tickers
        const strongTickers = await identifyStrongTickers();
        if (strongTickers.length === 0) {
            console.log('No strong pre-market tickers found OR pre-market phase was closed.');
        }

        const preMarketStocks = [];
        for (const tickerData of strongTickers) {
            const { symbol } = tickerData;
            const data = await getPreMarketData(symbol);
            if (data && data.priceChangePercent > 2 && data.preMarketVolume > 50000) { //
                preMarketStocks.push(data);
                if (data.priceChangePercent > 5) {
                    await placeOrder(symbol, 10, 'buy');
                }
            }
        }

        await managePortfolio();

        return {
            statusCode: 200,
            body: JSON.stringify({
                message: 'Trading script executed successfully.',
                dailySpent,
                remainingBudget: DAILY_BUDGET - dailySpent,
                preMarketStocks
            })
        };
    } catch (error) {
        console.error('Error running trading script:', error.message);
        return {
            statusCode: 500,
            body: JSON.stringify({ error: error.message })
        };
    }
};

// Test function to simulate order placement
const testPlaceOrder = async (ticker, qty, side) => {
    try {
        await placeOrder(ticker, qty, side);
        console.log(`Test order placed successfully: ${side} 5 shares of ${ticker}`);
    } catch (error) {
        console.error('Error placing test orders:', error.message);
    }
};


module.exports = {
    runTradingScript,
    testPlaceOrder
};